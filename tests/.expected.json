[
  {
    "file": "tests/test_c_style_for_loop.nova",
    "parse": "\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdio\";\n        exports =\n        [(Ast.Export_ident \"printf\"); (Ast.Export_ident \"puts\");\n          (Ast.Export_ident \"putchar\"); (Ast.Export_ident \"getchar\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"printf\"; calling_conf = \"c\";\n                 link_name = \"printf\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"puts\"; calling_conf = \"c\";\n                  link_name = \"puts\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"putchar\"; calling_conf = \"c\";\n                  link_name = \"putchar\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"getchar\"; calling_conf = \"c\";\n                  link_name = \"getchar\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdlib\";\n        exports =\n        [(Ast.Export_ident \"malloc\"); (Ast.Export_ident \"calloc\");\n          (Ast.Export_ident \"realloc\"); (Ast.Export_ident \"free\");\n          (Ast.Export_ident \"exit\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"malloc\"; calling_conf = \"c\";\n                 link_name = \"malloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"calloc\"; calling_conf = \"c\";\n                  link_name = \"calloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"realloc\"; calling_conf = \"c\";\n                  link_name = \"realloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"free\"; calling_conf = \"c\";\n                  link_name = \"free\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"exit\"; calling_conf = \"c\";\n                  link_name = \"exit\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"string\";\n        exports =\n        [(Ast.Export_ident \"strlen\"); (Ast.Export_ident \"strcmp\");\n          (Ast.Export_ident \"strcpy\"); (Ast.Export_ident \"strncpy\");\n          (Ast.Export_ident \"memcpy\"); (Ast.Export_ident \"memset\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"strlen\"; calling_conf = \"c\";\n                 link_name = \"strlen\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcmp\"; calling_conf = \"c\";\n                  link_name = \"strcmp\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcpy\"; calling_conf = \"c\";\n                  link_name = \"strcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strncpy\"; calling_conf = \"c\";\n                  link_name = \"strncpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memcpy\"; calling_conf = \"c\";\n                  link_name = \"memcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memset\"; calling_conf = \"c\";\n                  link_name = \"memset\"}))\n          ]}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"println\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"print\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"println\"; calling_conf = \"c\";\n        link_name = \"puts\"}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"print\"; calling_conf = \"c\";\n        link_name = \"printf\"}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"square\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"double\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"square\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Mul (\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\"))),\n                           (Ast.Unary_val (Ast.Ident \"x\")))))))))}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"double\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Add (\n                        (Ast.Additive_val\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\")))),\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_val (Ast.Ident \"x\")))\n                        ))))))}))\n(Ast.Statement\n   (Ast.Open_stmt\n      { Ast.mods = [\"std\"; \"c\"];\n        elements = [{ Ast.path = [\"printf\"]; alias = None }] }))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"main\"; params = []; explicit_ret = None;\n        body =\n        ([(Ast.Expression_stmt\n             (Ast.Relational_expr\n                (Ast.Relational_val\n                   (Ast.Additive_val\n                      (Ast.Multiplicative_val\n                         (Ast.Unary_call\n                            (Ast.Decl_call (\n                               (Ast.Relational_expr\n                                  (Ast.Relational_val\n                                     (Ast.Additive_val\n                                        (Ast.Multiplicative_val\n                                           (Ast.Unary_val\n                                              (Ast.Ident \"printf\")))))),\n                               [(Ast.Positional\n                                   (Ast.Relational_expr\n                                      (Ast.Relational_val\n                                         (Ast.Additive_val\n                                            (Ast.Multiplicative_val\n                                               (Ast.Unary_val\n                                                  (Ast.String\n                                                     \"Testing C-style for loop\\n\")))))))\n                                 ]\n                               ))))))));\n           (Ast.For_stmt\n              (Ast.For_c\n                 { Ast.var = \"i\";\n                   init =\n                   (Ast.Relational_expr\n                      (Ast.Relational_val\n                         (Ast.Additive_val\n                            (Ast.Multiplicative_val\n                               (Ast.Unary_val (Ast.Int 10))))));\n                   cond =\n                   (Ast.Relational_expr\n                      (Ast.Gt (\n                         (Ast.Additive_val\n                            (Ast.Multiplicative_val\n                               (Ast.Unary_val (Ast.Ident \"i\")))),\n                         (Ast.Additive_val\n                            (Ast.Multiplicative_val\n                               (Ast.Unary_val (Ast.Int 0))))\n                         )));\n                   update =\n                   (Ast.Assignment_expr\n                      (Ast.Sub_assign (\"i\",\n                         (Ast.Additive_val\n                            (Ast.Multiplicative_val\n                               (Ast.Unary_val (Ast.Int 1))))\n                         )));\n                   body =\n                   [(Ast.Statement\n                       (Ast.Expression_stmt\n                          (Ast.Relational_expr\n                             (Ast.Relational_val\n                                (Ast.Additive_val\n                                   (Ast.Multiplicative_val\n                                      (Ast.Unary_call\n                                         (Ast.Decl_call (\n                                            (Ast.Relational_expr\n                                               (Ast.Relational_val\n                                                  (Ast.Additive_val\n                                                     (Ast.Multiplicative_val\n                                                        (Ast.Unary_val\n                                                           (Ast.Ident\n                                                              \"printf\")))))),\n                                            [(Ast.Positional\n                                                (Ast.Relational_expr\n                                                   (Ast.Relational_val\n                                                      (Ast.Additive_val\n                                                         (Ast.Multiplicative_val\n                                                            (Ast.Unary_val\n                                                               (Ast.String\n                                                                  \"i = %d\\n\")))))));\n                                              (Ast.Positional\n                                                 (Ast.Relational_expr\n                                                    (Ast.Relational_val\n                                                       (Ast.Additive_val\n                                                          (Ast.Multiplicative_val\n                                                             (Ast.Unary_val\n                                                                (Ast.Ident\n                                                                   \"i\")))))))\n                                              ]\n                                            )))))))))\n                     ]\n                   }))\n           ],\n         None)}))",
    "codegen": "Wrote build/emit/root.asm\n===== build/emit/root.asm (generated) =====\n\n\n  Wrote build/emit/c.asm\n===== build/emit/c.asm (generated) =====\nglobal stdio_getchar\nglobal stdio_printf\nglobal stdio_putchar\nglobal stdio_puts\nglobal stdlib_calloc\nglobal stdlib_exit\nglobal stdlib_free\nglobal stdlib_malloc\nglobal stdlib_realloc\nglobal string_memcpy\nglobal string_memset\nglobal string_strcmp\nglobal string_strcpy\nglobal string_strlen\nglobal string_strncpy\nsection .text\nstdio_printf:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_puts:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_putchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_getchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_malloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_calloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_realloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_free:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_exit:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strlen:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcmp:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strncpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memset:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/io.asm\n===== build/emit/io.asm (generated) =====\nglobal print\nglobal println\nsection .text\nprintln:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nprint:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/math.asm\n===== build/emit/math.asm (generated) =====\nglobal double\nglobal square\nsection .text\nsquare:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  imul rax, rbx\nsquare_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\ndouble:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  add rax, rbx\ndouble_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/test_c_style_for_loop.asm\n===== build/emit/test_c_style_for_loop.asm (generated) =====\nextern malloc\nextern printf\nglobal main\nsection .text\nmain:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 112\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 108\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 102\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 108\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 121\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 115\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 45\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 67\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 103\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 115\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 84\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_0:\n  cmp r12, 0\n  je __list_strlen_done_1\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_0\n__list_strlen_done_1:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_2:\n  cmp r12, 0\n  je __list_strcpy_done_3\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_2\n__list_strcpy_done_3:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  xor rax, rax\n  call printf\n  mov rax, 10\n  mov qword [rbp - 8], rax\n__for_start_4:\n  mov rax, [rbp-8]\n  push rax\n  mov rax, 0\n  pop rbx\n  cmp rbx, rax\n  setg al\n  movzx rax, al\n  test rax, rax\n  jz __for_end_5\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 61\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_6:\n  cmp r12, 0\n  je __list_strlen_done_7\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_6\n__list_strlen_done_7:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_8:\n  cmp r12, 0\n  je __list_strcpy_done_9\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_8\n__list_strcpy_done_9:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, [rbp-8]\n  mov rsi, rax\n  xor rax, rax\n  call printf\n  mov rax, 1\n  mov rbx, [rbp - 8]\n  sub rbx, rax\n  mov [rbp - 8], rbx\n  mov rax, rbx\n  jmp __for_start_4\n__for_end_5:\nmain_end:\n  xor rax, rax\n  mov rsp, rbp\n  pop rbp\n  ret",
    "run": "Testing C-style for loop\ni = 10\ni = 9\ni = 8\ni = 7\ni = 6\ni = 5\ni = 4\ni = 3\ni = 2\ni = 1"
  },
  {
    "file": "tests/test_compound_assign.nova",
    "parse": "\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdio\";\n        exports =\n        [(Ast.Export_ident \"printf\"); (Ast.Export_ident \"puts\");\n          (Ast.Export_ident \"putchar\"); (Ast.Export_ident \"getchar\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"printf\"; calling_conf = \"c\";\n                 link_name = \"printf\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"puts\"; calling_conf = \"c\";\n                  link_name = \"puts\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"putchar\"; calling_conf = \"c\";\n                  link_name = \"putchar\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"getchar\"; calling_conf = \"c\";\n                  link_name = \"getchar\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdlib\";\n        exports =\n        [(Ast.Export_ident \"malloc\"); (Ast.Export_ident \"calloc\");\n          (Ast.Export_ident \"realloc\"); (Ast.Export_ident \"free\");\n          (Ast.Export_ident \"exit\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"malloc\"; calling_conf = \"c\";\n                 link_name = \"malloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"calloc\"; calling_conf = \"c\";\n                  link_name = \"calloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"realloc\"; calling_conf = \"c\";\n                  link_name = \"realloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"free\"; calling_conf = \"c\";\n                  link_name = \"free\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"exit\"; calling_conf = \"c\";\n                  link_name = \"exit\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"string\";\n        exports =\n        [(Ast.Export_ident \"strlen\"); (Ast.Export_ident \"strcmp\");\n          (Ast.Export_ident \"strcpy\"); (Ast.Export_ident \"strncpy\");\n          (Ast.Export_ident \"memcpy\"); (Ast.Export_ident \"memset\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"strlen\"; calling_conf = \"c\";\n                 link_name = \"strlen\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcmp\"; calling_conf = \"c\";\n                  link_name = \"strcmp\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcpy\"; calling_conf = \"c\";\n                  link_name = \"strcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strncpy\"; calling_conf = \"c\";\n                  link_name = \"strncpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memcpy\"; calling_conf = \"c\";\n                  link_name = \"memcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memset\"; calling_conf = \"c\";\n                  link_name = \"memset\"}))\n          ]}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"println\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"print\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"println\"; calling_conf = \"c\";\n        link_name = \"puts\"}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"print\"; calling_conf = \"c\";\n        link_name = \"printf\"}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"square\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"double\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"square\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Mul (\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\"))),\n                           (Ast.Unary_val (Ast.Ident \"x\")))))))))}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"double\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Add (\n                        (Ast.Additive_val\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\")))),\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_val (Ast.Ident \"x\")))\n                        ))))))}))\n(Ast.Statement\n   (Ast.Open_stmt\n      { Ast.mods = [\"std\"; \"c\"];\n        elements = [{ Ast.path = [\"printf\"]; alias = None }] }))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"main\"; params = []; explicit_ret = None;\n        body =\n        ([(Ast.Decl_stmt\n             Ast.Decl {tags = []; name = \"x\"; params = [];\n               explicit_ret = None;\n               body =\n               ([],\n                (Some (Ast.Relational_expr\n                         (Ast.Relational_val\n                            (Ast.Additive_val\n                               (Ast.Multiplicative_val\n                                  (Ast.Unary_val (Ast.Int 10))))))))});\n           (Ast.Expression_stmt\n              (Ast.Relational_expr\n                 (Ast.Relational_val\n                    (Ast.Additive_val\n                       (Ast.Multiplicative_val\n                          (Ast.Unary_call\n                             (Ast.Decl_call (\n                                (Ast.Relational_expr\n                                   (Ast.Relational_val\n                                      (Ast.Additive_val\n                                         (Ast.Multiplicative_val\n                                            (Ast.Unary_val\n                                               (Ast.Ident \"printf\")))))),\n                                [(Ast.Positional\n                                    (Ast.Relational_expr\n                                       (Ast.Relational_val\n                                          (Ast.Additive_val\n                                             (Ast.Multiplicative_val\n                                                (Ast.Unary_val\n                                                   (Ast.String\n                                                      \"x before: %d\\n\")))))));\n                                  (Ast.Positional\n                                     (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Multiplicative_val\n                                                 (Ast.Unary_val\n                                                    (Ast.Ident \"x\")))))))\n                                  ]\n                                ))))))));\n           (Ast.Expression_stmt\n              (Ast.Assignment_expr\n                 (Ast.Sub_assign (\"x\",\n                    (Ast.Additive_val\n                       (Ast.Multiplicative_val (Ast.Unary_val (Ast.Int 3))))\n                    ))));\n           (Ast.Expression_stmt\n              (Ast.Relational_expr\n                 (Ast.Relational_val\n                    (Ast.Additive_val\n                       (Ast.Multiplicative_val\n                          (Ast.Unary_call\n                             (Ast.Decl_call (\n                                (Ast.Relational_expr\n                                   (Ast.Relational_val\n                                      (Ast.Additive_val\n                                         (Ast.Multiplicative_val\n                                            (Ast.Unary_val\n                                               (Ast.Ident \"printf\")))))),\n                                [(Ast.Positional\n                                    (Ast.Relational_expr\n                                       (Ast.Relational_val\n                                          (Ast.Additive_val\n                                             (Ast.Multiplicative_val\n                                                (Ast.Unary_val\n                                                   (Ast.String\n                                                      \"x after: %d\\n\")))))));\n                                  (Ast.Positional\n                                     (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Multiplicative_val\n                                                 (Ast.Unary_val\n                                                    (Ast.Ident \"x\")))))))\n                                  ]\n                                ))))))));\n           (Ast.Expression_stmt\n              (Ast.Assignment_expr\n                 (Ast.Add_assign (\"x\",\n                    (Ast.Additive_val\n                       (Ast.Multiplicative_val (Ast.Unary_val (Ast.Int 3))))\n                    ))));\n           (Ast.Expression_stmt\n              (Ast.Relational_expr\n                 (Ast.Relational_val\n                    (Ast.Additive_val\n                       (Ast.Multiplicative_val\n                          (Ast.Unary_call\n                             (Ast.Decl_call (\n                                (Ast.Relational_expr\n                                   (Ast.Relational_val\n                                      (Ast.Additive_val\n                                         (Ast.Multiplicative_val\n                                            (Ast.Unary_val\n                                               (Ast.Ident \"printf\")))))),\n                                [(Ast.Positional\n                                    (Ast.Relational_expr\n                                       (Ast.Relational_val\n                                          (Ast.Additive_val\n                                             (Ast.Multiplicative_val\n                                                (Ast.Unary_val\n                                                   (Ast.String\n                                                      \"x after: %d\\n\")))))));\n                                  (Ast.Positional\n                                     (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Multiplicative_val\n                                                 (Ast.Unary_val\n                                                    (Ast.Ident \"x\")))))))\n                                  ]\n                                ))))))));\n           (Ast.Expression_stmt\n              (Ast.Assignment_expr\n                 (Ast.Mul_assign (\"x\",\n                    (Ast.Additive_val\n                       (Ast.Multiplicative_val (Ast.Unary_val (Ast.Int 2))))\n                    ))));\n           (Ast.Expression_stmt\n              (Ast.Relational_expr\n                 (Ast.Relational_val\n                    (Ast.Additive_val\n                       (Ast.Multiplicative_val\n                          (Ast.Unary_call\n                             (Ast.Decl_call (\n                                (Ast.Relational_expr\n                                   (Ast.Relational_val\n                                      (Ast.Additive_val\n                                         (Ast.Multiplicative_val\n                                            (Ast.Unary_val\n                                               (Ast.Ident \"printf\")))))),\n                                [(Ast.Positional\n                                    (Ast.Relational_expr\n                                       (Ast.Relational_val\n                                          (Ast.Additive_val\n                                             (Ast.Multiplicative_val\n                                                (Ast.Unary_val\n                                                   (Ast.String\n                                                      \"x after: %d\\n\")))))));\n                                  (Ast.Positional\n                                     (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Multiplicative_val\n                                                 (Ast.Unary_val\n                                                    (Ast.Ident \"x\")))))))\n                                  ]\n                                ))))))));\n           (Ast.Expression_stmt\n              (Ast.Assignment_expr\n                 (Ast.Div_assign (\"x\",\n                    (Ast.Additive_val\n                       (Ast.Multiplicative_val (Ast.Unary_val (Ast.Int 10))))\n                    ))))\n           ],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_call\n                              (Ast.Decl_call (\n                                 (Ast.Relational_expr\n                                    (Ast.Relational_val\n                                       (Ast.Additive_val\n                                          (Ast.Multiplicative_val\n                                             (Ast.Unary_val\n                                                (Ast.Ident \"printf\")))))),\n                                 [(Ast.Positional\n                                     (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Multiplicative_val\n                                                 (Ast.Unary_val\n                                                    (Ast.String\n                                                       \"x after: %d\\n\")))))));\n                                   (Ast.Positional\n                                      (Ast.Relational_expr\n                                         (Ast.Relational_val\n                                            (Ast.Additive_val\n                                               (Ast.Multiplicative_val\n                                                  (Ast.Unary_val\n                                                     (Ast.Ident \"x\")))))))\n                                   ]\n                                 )))))))))}))",
    "codegen": "Wrote build/emit/root.asm\n===== build/emit/root.asm (generated) =====\n\n\n  Wrote build/emit/c.asm\n===== build/emit/c.asm (generated) =====\nglobal stdio_getchar\nglobal stdio_printf\nglobal stdio_putchar\nglobal stdio_puts\nglobal stdlib_calloc\nglobal stdlib_exit\nglobal stdlib_free\nglobal stdlib_malloc\nglobal stdlib_realloc\nglobal string_memcpy\nglobal string_memset\nglobal string_strcmp\nglobal string_strcpy\nglobal string_strlen\nglobal string_strncpy\nsection .text\nstdio_printf:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_puts:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_putchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_getchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_malloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_calloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_realloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_free:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_exit:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strlen:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcmp:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strncpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memset:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/io.asm\n===== build/emit/io.asm (generated) =====\nglobal print\nglobal println\nsection .text\nprintln:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nprint:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/math.asm\n===== build/emit/math.asm (generated) =====\nglobal double\nglobal square\nsection .text\nsquare:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  imul rax, rbx\nsquare_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\ndouble:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  add rax, rbx\ndouble_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/test_compound_assign.asm\n===== build/emit/test_compound_assign.asm (generated) =====\nextern malloc\nextern printf\nglobal main\nsection .text\nmain:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov rax, 10\n  mov [rbp-8], rax\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 58\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 102\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 98\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 120\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_20:\n  cmp r12, 0\n  je __list_strlen_done_21\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_20\n__list_strlen_done_21:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_22:\n  cmp r12, 0\n  je __list_strcpy_done_23\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_22\n__list_strcpy_done_23:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, [rbp-8]\n  mov rsi, rax\n  xor rax, rax\n  call printf\n  mov rax, 3\n  mov rbx, [rbp - 8]\n  sub rbx, rax\n  mov [rbp - 8], rbx\n  mov rax, rbx\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 58\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 102\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 120\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_24:\n  cmp r12, 0\n  je __list_strlen_done_25\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_24\n__list_strlen_done_25:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_26:\n  cmp r12, 0\n  je __list_strcpy_done_27\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_26\n__list_strcpy_done_27:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, [rbp-8]\n  mov rsi, rax\n  xor rax, rax\n  call printf\n  mov rax, 3\n  mov rbx, [rbp - 8]\n  add rax, rbx\n  mov [rbp - 8], rax\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 58\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 102\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 120\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_28:\n  cmp r12, 0\n  je __list_strlen_done_29\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_28\n__list_strlen_done_29:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_30:\n  cmp r12, 0\n  je __list_strcpy_done_31\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_30\n__list_strcpy_done_31:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, [rbp-8]\n  mov rsi, rax\n  xor rax, rax\n  call printf\n  mov rax, 2\n  mov rbx, [rbp - 8]\n  imul rax, rbx\n  mov [rbp - 8], rax\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 58\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 102\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 120\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_32:\n  cmp r12, 0\n  je __list_strlen_done_33\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_32\n__list_strlen_done_33:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_34:\n  cmp r12, 0\n  je __list_strcpy_done_35\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_34\n__list_strcpy_done_35:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, [rbp-8]\n  mov rsi, rax\n  xor rax, rax\n  call printf\n  mov rax, 10\n  mov rcx, rax\n  mov rax, [rbp - 8]\n  cqo\n  idiv rcx\n  mov [rbp - 8], rax\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 58\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 102\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 120\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_36:\n  cmp r12, 0\n  je __list_strlen_done_37\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_36\n__list_strlen_done_37:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_38:\n  cmp r12, 0\n  je __list_strcpy_done_39\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_38\n__list_strcpy_done_39:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, [rbp-8]\n  mov rsi, rax\n  xor rax, rax\n  call printf\nmain_end:\n  xor rax, rax\n  mov rsp, rbp\n  pop rbp\n  ret",
    "run": "x before: 10\nx after: 7\nx after: 10\nx after: 20\nx after: 2"
  },
  {
    "file": "tests/test_enum_payload.nova",
    "parse": "\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdio\";\n        exports =\n        [(Ast.Export_ident \"printf\"); (Ast.Export_ident \"puts\");\n          (Ast.Export_ident \"putchar\"); (Ast.Export_ident \"getchar\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"printf\"; calling_conf = \"c\";\n                 link_name = \"printf\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"puts\"; calling_conf = \"c\";\n                  link_name = \"puts\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"putchar\"; calling_conf = \"c\";\n                  link_name = \"putchar\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"getchar\"; calling_conf = \"c\";\n                  link_name = \"getchar\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdlib\";\n        exports =\n        [(Ast.Export_ident \"malloc\"); (Ast.Export_ident \"calloc\");\n          (Ast.Export_ident \"realloc\"); (Ast.Export_ident \"free\");\n          (Ast.Export_ident \"exit\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"malloc\"; calling_conf = \"c\";\n                 link_name = \"malloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"calloc\"; calling_conf = \"c\";\n                  link_name = \"calloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"realloc\"; calling_conf = \"c\";\n                  link_name = \"realloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"free\"; calling_conf = \"c\";\n                  link_name = \"free\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"exit\"; calling_conf = \"c\";\n                  link_name = \"exit\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"string\";\n        exports =\n        [(Ast.Export_ident \"strlen\"); (Ast.Export_ident \"strcmp\");\n          (Ast.Export_ident \"strcpy\"); (Ast.Export_ident \"strncpy\");\n          (Ast.Export_ident \"memcpy\"); (Ast.Export_ident \"memset\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"strlen\"; calling_conf = \"c\";\n                 link_name = \"strlen\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcmp\"; calling_conf = \"c\";\n                  link_name = \"strcmp\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcpy\"; calling_conf = \"c\";\n                  link_name = \"strcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strncpy\"; calling_conf = \"c\";\n                  link_name = \"strncpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memcpy\"; calling_conf = \"c\";\n                  link_name = \"memcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memset\"; calling_conf = \"c\";\n                  link_name = \"memset\"}))\n          ]}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"println\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"print\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"println\"; calling_conf = \"c\";\n        link_name = \"puts\"}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"print\"; calling_conf = \"c\";\n        link_name = \"printf\"}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"square\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"double\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"square\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Mul (\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\"))),\n                           (Ast.Unary_val (Ast.Ident \"x\")))))))))}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"double\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Add (\n                        (Ast.Additive_val\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\")))),\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_val (Ast.Ident \"x\")))\n                        ))))))}))\n(Ast.Statement\n   (Ast.Open_stmt\n      { Ast.mods = [\"std\"; \"c\"];\n        elements = [{ Ast.path = [\"stdio\"; \"printf\"]; alias = None }] }))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"Job\";\n        params =\n        [(Ast.Typed (\"title\", (Ast.User \"string\")));\n          (Ast.Typed (\"salary\", (Ast.User \"i32\")))];\n        explicit_ret = None;\n        body =\n        ([],\n         (Some (Ast.Enum_expr (\n                  [(\"programmer\",\n                    (Some (Ast.Struct_body\n                             [(\"lang\", (Ast.User \"string\"), None)])));\n                    (\"manager\",\n                     (Some (Ast.Struct_body\n                              [(\"team_size\", (Ast.User \"i32\"), None)])));\n                    (\"intern\", (Some (Ast.Type_body Ast.Unit_typ)))],\n                  (Some [(Ast.Statement\n                            (Ast.Decl_stmt\n                               Ast.Decl {tags = []; name = \"title\";\n                                 params = [];\n                                 explicit_ret = (Some (Ast.User \"string\"));\n                                 body =\n                                 ([],\n                                  (Some (Ast.Relational_expr\n                                           (Ast.Relational_val\n                                              (Ast.Additive_val\n                                                 (Ast.Multiplicative_val\n                                                    (Ast.Unary_val\n                                                       (Ast.Ident \"title\"))))))))}));\n                          (Ast.Statement\n                             (Ast.Decl_stmt\n                                Ast.Decl {tags = []; name = \"salary\";\n                                  params = [];\n                                  explicit_ret = (Some (Ast.User \"i32\"));\n                                  body =\n                                  ([],\n                                   (Some (Ast.Relational_expr\n                                            (Ast.Relational_val\n                                               (Ast.Additive_val\n                                                  (Ast.Multiplicative_val\n                                                     (Ast.Unary_val\n                                                        (Ast.Ident \"salary\"))))))))}))\n                          ])\n                  ))))}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"main\"; params = []; explicit_ret = None;\n        body =\n        ([(Ast.Decl_stmt\n             Ast.Decl {tags = []; name = \"job1\"; params = [];\n               explicit_ret = None;\n               body =\n               ([],\n                (Some (Ast.Relational_expr\n                         (Ast.Relational_val\n                            (Ast.Additive_val\n                               (Ast.Multiplicative_val\n                                  (Ast.Unary_call\n                                     (Ast.Decl_call (\n                                        (Ast.Relational_expr\n                                           (Ast.Relational_val\n                                              (Ast.Additive_val\n                                                 (Ast.Multiplicative_val\n                                                    (Ast.Unary_member (\n                                                       (Ast.Unary_val\n                                                          (Ast.Ident \"Job\")),\n                                                       \"programmer\")))))),\n                                        [(Ast.Positional\n                                            (Ast.Relational_expr\n                                               (Ast.Relational_val\n                                                  (Ast.Additive_val\n                                                     (Ast.Multiplicative_val\n                                                        (Ast.Unary_val\n                                                           (Ast.String\n                                                              \"Software Engineer\")))))));\n                                          (Ast.Positional\n                                             (Ast.Relational_expr\n                                                (Ast.Relational_val\n                                                   (Ast.Additive_val\n                                                      (Ast.Multiplicative_val\n                                                         (Ast.Unary_val\n                                                            (Ast.Int 120000)))))));\n                                          (Ast.Positional\n                                             (Ast.Relational_expr\n                                                (Ast.Relational_val\n                                                   (Ast.Additive_val\n                                                      (Ast.Multiplicative_val\n                                                         (Ast.Unary_val\n                                                            (Ast.String\n                                                               \"Rust\")))))))\n                                          ]\n                                        )))))))))});\n           (Ast.Decl_stmt\n              Ast.Decl {tags = []; name = \"job2\"; params = [];\n                explicit_ret = None;\n                body =\n                ([],\n                 (Some (Ast.Relational_expr\n                          (Ast.Relational_val\n                             (Ast.Additive_val\n                                (Ast.Multiplicative_val\n                                   (Ast.Unary_call\n                                      (Ast.Decl_call (\n                                         (Ast.Relational_expr\n                                            (Ast.Relational_val\n                                               (Ast.Additive_val\n                                                  (Ast.Multiplicative_val\n                                                     (Ast.Unary_member (\n                                                        (Ast.Unary_val\n                                                           (Ast.Ident \"Job\")),\n                                                        \"manager\")))))),\n                                         [(Ast.Positional\n                                             (Ast.Relational_expr\n                                                (Ast.Relational_val\n                                                   (Ast.Additive_val\n                                                      (Ast.Multiplicative_val\n                                                         (Ast.Unary_val\n                                                            (Ast.String\n                                                               \"Engineering Manager\")))))));\n                                           (Ast.Positional\n                                              (Ast.Relational_expr\n                                                 (Ast.Relational_val\n                                                    (Ast.Additive_val\n                                                       (Ast.Multiplicative_val\n                                                          (Ast.Unary_val\n                                                             (Ast.Int 150000)))))));\n                                           (Ast.Positional\n                                              (Ast.Relational_expr\n                                                 (Ast.Relational_val\n                                                    (Ast.Additive_val\n                                                       (Ast.Multiplicative_val\n                                                          (Ast.Unary_val\n                                                             (Ast.Int 10)))))))\n                                           ]\n                                         )))))))))});\n           (Ast.Expression_stmt\n              (Ast.Relational_expr\n                 (Ast.Relational_val\n                    (Ast.Additive_val\n                       (Ast.Multiplicative_val\n                          (Ast.Unary_call\n                             (Ast.Decl_call (\n                                (Ast.Relational_expr\n                                   (Ast.Relational_val\n                                      (Ast.Additive_val\n                                         (Ast.Multiplicative_val\n                                            (Ast.Unary_val\n                                               (Ast.Ident \"printf\")))))),\n                                [(Ast.Positional\n                                    (Ast.Relational_expr\n                                       (Ast.Relational_val\n                                          (Ast.Additive_val\n                                             (Ast.Multiplicative_val\n                                                (Ast.Unary_val\n                                                   (Ast.String\n                                                      \"Job 1 - Title: %s, Salary: %d, Lang: %s\\n\")))))));\n                                  (Ast.Positional\n                                     (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Multiplicative_val\n                                                 (Ast.Unary_member (\n                                                    (Ast.Unary_val\n                                                       (Ast.Ident \"job1\")),\n                                                    \"title\")))))));\n                                  (Ast.Positional\n                                     (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Multiplicative_val\n                                                 (Ast.Unary_member (\n                                                    (Ast.Unary_val\n                                                       (Ast.Ident \"job1\")),\n                                                    \"salary\")))))));\n                                  (Ast.Positional\n                                     (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Multiplicative_val\n                                                 (Ast.Unary_member (\n                                                    (Ast.Unary_val\n                                                       (Ast.Ident \"job1\")),\n                                                    \"lang\")))))))\n                                  ]\n                                ))))))))\n           ],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_call\n                              (Ast.Decl_call (\n                                 (Ast.Relational_expr\n                                    (Ast.Relational_val\n                                       (Ast.Additive_val\n                                          (Ast.Multiplicative_val\n                                             (Ast.Unary_call\n                                                (Ast.Decl_call (\n                                                   (Ast.Relational_expr\n                                                      (Ast.Relational_val\n                                                         (Ast.Additive_val\n                                                            (Ast.Multiplicative_val\n                                                               (Ast.Unary_val\n                                                                  (Ast.Ident\n                                                                    \"printf\")))))),\n                                                   [(Ast.Positional\n                                                       (Ast.Relational_expr\n                                                          (Ast.Relational_val\n                                                             (Ast.Additive_val\n                                                                (Ast.Multiplicative_val\n                                                                   (Ast.Unary_val\n                                                                    (Ast.String\n                                                                    \"Job 2 - Title: %s, Salary: %d, Team: %d\\n\")))))));\n                                                     (Ast.Positional\n                                                        (Ast.Relational_expr\n                                                           (Ast.Relational_val\n                                                              (Ast.Additive_val\n                                                                 (Ast.Multiplicative_val\n                                                                    (\n                                                                    Ast.Unary_member (\n                                                                    (Ast.Unary_val\n                                                                    (Ast.Ident\n                                                                    \"job2\")),\n                                                                    \"title\")))))));\n                                                     (Ast.Positional\n                                                        (Ast.Relational_expr\n                                                           (Ast.Relational_val\n                                                              (Ast.Additive_val\n                                                                 (Ast.Multiplicative_val\n                                                                    (\n                                                                    Ast.Unary_member (\n                                                                    (Ast.Unary_val\n                                                                    (Ast.Ident\n                                                                    \"job2\")),\n                                                                    \"salary\"\n                                                                    )))))));\n                                                     (Ast.Positional\n                                                        (Ast.Relational_expr\n                                                           (Ast.Relational_val\n                                                              (Ast.Additive_val\n                                                                 (Ast.Multiplicative_val\n                                                                    (\n                                                                    Ast.Unary_member (\n                                                                    (Ast.Unary_val\n                                                                    (Ast.Ident\n                                                                    \"job2\")),\n                                                                    \"team_size\"\n                                                                    )))))))\n                                                     ]\n                                                   ))))))),\n                                 [])))))))))}))",
    "codegen": "Wrote build/emit/root.asm\n===== build/emit/root.asm (generated) =====\n\n\n  Wrote build/emit/c.asm\n===== build/emit/c.asm (generated) =====\nglobal stdio_getchar\nglobal stdio_printf\nglobal stdio_putchar\nglobal stdio_puts\nglobal stdlib_calloc\nglobal stdlib_exit\nglobal stdlib_free\nglobal stdlib_malloc\nglobal stdlib_realloc\nglobal string_memcpy\nglobal string_memset\nglobal string_strcmp\nglobal string_strcpy\nglobal string_strlen\nglobal string_strncpy\nsection .text\nstdio_printf:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_puts:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_putchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_getchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_malloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_calloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_realloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_free:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_exit:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strlen:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcmp:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strncpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memset:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/io.asm\n===== build/emit/io.asm (generated) =====\nglobal print\nglobal println\nsection .text\nprintln:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nprint:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/math.asm\n===== build/emit/math.asm (generated) =====\nglobal double\nglobal square\nsection .text\nsquare:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  imul rax, rbx\nsquare_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\ndouble:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  add rax, rbx\ndouble_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/test_enum_payload.asm\n===== build/emit/test_enum_payload.asm (generated) =====\nextern malloc\nextern printf\nglobal Job\nglobal Job_salary\nglobal Job_title\nglobal main\nsection .text\nJob_title:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  mov rax, [rax+8]\nJob_title_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\nJob_salary:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  mov rax, [rax+16]\nJob_salary_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\nJob:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov [rbp-16], rsi\n  mov rdi, 32\n  call malloc\n  mov r12, rax\n  mov qword [r12], 0\n  mov rax, 0\n  mov [r12+8], rax\n  mov [r12+16], rax\n  mov [r12+24], rax\n  mov rax, r12\nJob_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\nmain:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov r12, 0\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 103\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 69\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 119\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 102\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 83\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rdi, rax\n  mov rax, 120000\n  mov rsi, rax\n  mov r12, 0\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 115\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 117\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 82\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rdx, rax\n  mov rdi, 32\n  call malloc\n  mov r12, rax\n  mov qword [r12], 0\n  push r12\n  mov r12, 0\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 103\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 69\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 119\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 102\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 83\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  pop r12\n  mov [r12+8], rax\n  push r12\n  mov rax, 120000\n  pop r12\n  mov [r12+16], rax\n  push r12\n  mov r12, 0\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 115\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 117\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 82\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  pop r12\n  mov [r12+24], rax\n  mov rax, r12\n  mov [rbp-8], rax\n  mov r12, 0\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 103\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 77\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 103\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 103\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 69\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rdi, rax\n  mov rax, 150000\n  mov rsi, rax\n  mov rax, 10\n  mov rdx, rax\n  mov rdi, 32\n  call malloc\n  mov r12, rax\n  mov qword [r12], 1\n  push r12\n  mov r12, 0\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 103\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 77\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 103\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 103\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 69\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  pop r12\n  mov [r12+8], rax\n  push r12\n  mov rax, 150000\n  pop r12\n  mov [r12+16], rax\n  push r12\n  mov rax, 10\n  pop r12\n  mov [r12+24], rax\n  mov rax, r12\n  mov [rbp-16], rax\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 115\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 58\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 103\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 76\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 44\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 58\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 121\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 108\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 83\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 44\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 115\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 58\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 108\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 84\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 45\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 49\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 98\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 74\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_60:\n  cmp r12, 0\n  je __list_strlen_done_61\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_60\n__list_strlen_done_61:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_62:\n  cmp r12, 0\n  je __list_strcpy_done_63\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_62\n__list_strcpy_done_63:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, [rbp-8]\n  mov rax, [rax+8]\n  push rax\n  push rdi\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_64:\n  cmp r12, 0\n  je __list_strlen_done_65\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_64\n__list_strlen_done_65:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_66:\n  cmp r12, 0\n  je __list_strcpy_done_67\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_66\n__list_strcpy_done_67:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  pop rdi\n  pop rax\n  mov rsi, rax\n  mov rax, [rbp-8]\n  mov rax, [rax+16]\n  mov rdx, rax\n  mov rax, [rbp-8]\n  mov rax, [rax+24]\n  push rax\n  push rdi\n  push rsi\n  push rdx\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_68:\n  cmp r12, 0\n  je __list_strlen_done_69\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_68\n__list_strlen_done_69:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_70:\n  cmp r12, 0\n  je __list_strcpy_done_71\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_70\n__list_strcpy_done_71:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  pop rdx\n  pop rsi\n  pop rdi\n  pop rax\n  mov rcx, rax\n  xor rax, rax\n  call printf\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 58\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 109\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 84\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 44\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 58\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 121\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 108\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 83\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 44\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 115\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 58\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 108\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 84\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 45\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 50\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 98\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 74\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_72:\n  cmp r12, 0\n  je __list_strlen_done_73\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_72\n__list_strlen_done_73:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_74:\n  cmp r12, 0\n  je __list_strcpy_done_75\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_74\n__list_strcpy_done_75:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, [rbp-16]\n  mov rax, [rax+8]\n  push rax\n  push rdi\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_76:\n  cmp r12, 0\n  je __list_strlen_done_77\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_76\n__list_strlen_done_77:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_78:\n  cmp r12, 0\n  je __list_strcpy_done_79\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_78\n__list_strcpy_done_79:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  pop rdi\n  pop rax\n  mov rsi, rax\n  mov rax, [rbp-16]\n  mov rax, [rax+16]\n  mov rdx, rax\n  mov rax, [rbp-16]\n  mov rax, [rax+24]\n  mov rcx, rax\n  xor rax, rax\n  call printf\nmain_end:\n  xor rax, rax\n  mov rsp, rbp\n  pop rbp\n  ret",
    "run": "Job 1 - Title: S, Salary: 120000, Lang: R\nJob 2 - Title: E, Salary: 150000, Team: 10"
  },
  {
    "file": "tests/test_for_loop.nova",
    "parse": "\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdio\";\n        exports =\n        [(Ast.Export_ident \"printf\"); (Ast.Export_ident \"puts\");\n          (Ast.Export_ident \"putchar\"); (Ast.Export_ident \"getchar\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"printf\"; calling_conf = \"c\";\n                 link_name = \"printf\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"puts\"; calling_conf = \"c\";\n                  link_name = \"puts\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"putchar\"; calling_conf = \"c\";\n                  link_name = \"putchar\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"getchar\"; calling_conf = \"c\";\n                  link_name = \"getchar\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdlib\";\n        exports =\n        [(Ast.Export_ident \"malloc\"); (Ast.Export_ident \"calloc\");\n          (Ast.Export_ident \"realloc\"); (Ast.Export_ident \"free\");\n          (Ast.Export_ident \"exit\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"malloc\"; calling_conf = \"c\";\n                 link_name = \"malloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"calloc\"; calling_conf = \"c\";\n                  link_name = \"calloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"realloc\"; calling_conf = \"c\";\n                  link_name = \"realloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"free\"; calling_conf = \"c\";\n                  link_name = \"free\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"exit\"; calling_conf = \"c\";\n                  link_name = \"exit\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"string\";\n        exports =\n        [(Ast.Export_ident \"strlen\"); (Ast.Export_ident \"strcmp\");\n          (Ast.Export_ident \"strcpy\"); (Ast.Export_ident \"strncpy\");\n          (Ast.Export_ident \"memcpy\"); (Ast.Export_ident \"memset\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"strlen\"; calling_conf = \"c\";\n                 link_name = \"strlen\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcmp\"; calling_conf = \"c\";\n                  link_name = \"strcmp\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcpy\"; calling_conf = \"c\";\n                  link_name = \"strcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strncpy\"; calling_conf = \"c\";\n                  link_name = \"strncpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memcpy\"; calling_conf = \"c\";\n                  link_name = \"memcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memset\"; calling_conf = \"c\";\n                  link_name = \"memset\"}))\n          ]}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"println\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"print\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"println\"; calling_conf = \"c\";\n        link_name = \"puts\"}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"print\"; calling_conf = \"c\";\n        link_name = \"printf\"}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"square\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"double\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"square\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Mul (\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\"))),\n                           (Ast.Unary_val (Ast.Ident \"x\")))))))))}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"double\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Add (\n                        (Ast.Additive_val\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\")))),\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_val (Ast.Ident \"x\")))\n                        ))))))}))\n(Ast.Statement\n   (Ast.Open_stmt\n      { Ast.mods = [\"std\"; \"c\"];\n        elements = [{ Ast.path = [\"printf\"]; alias = None }] }))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"main\"; params = []; explicit_ret = None;\n        body =\n        ([(Ast.Expression_stmt\n             (Ast.Relational_expr\n                (Ast.Relational_val\n                   (Ast.Additive_val\n                      (Ast.Multiplicative_val\n                         (Ast.Unary_call\n                            (Ast.Decl_call (\n                               (Ast.Relational_expr\n                                  (Ast.Relational_val\n                                     (Ast.Additive_val\n                                        (Ast.Multiplicative_val\n                                           (Ast.Unary_val\n                                              (Ast.Ident \"printf\")))))),\n                               [(Ast.Positional\n                                   (Ast.Relational_expr\n                                      (Ast.Relational_val\n                                         (Ast.Additive_val\n                                            (Ast.Multiplicative_val\n                                               (Ast.Unary_val\n                                                  (Ast.String\n                                                     \"In T-minus...\\n\")))))))\n                                 ]\n                               ))))))));\n           (Ast.Decl_stmt\n              Ast.Decl {tags = []; name = \"countdown\"; params = [];\n                explicit_ret = None;\n                body =\n                ([],\n                 (Some (Ast.List_expr\n                          [(Ast.Relational_expr\n                              (Ast.Relational_val\n                                 (Ast.Additive_val\n                                    (Ast.Multiplicative_val\n                                       (Ast.Unary_val (Ast.Int 10))))));\n                            (Ast.Relational_expr\n                               (Ast.Relational_val\n                                  (Ast.Additive_val\n                                     (Ast.Multiplicative_val\n                                        (Ast.Unary_val (Ast.Int 9))))));\n                            (Ast.Relational_expr\n                               (Ast.Relational_val\n                                  (Ast.Additive_val\n                                     (Ast.Multiplicative_val\n                                        (Ast.Unary_val (Ast.Int 8))))));\n                            (Ast.Relational_expr\n                               (Ast.Relational_val\n                                  (Ast.Additive_val\n                                     (Ast.Multiplicative_val\n                                        (Ast.Unary_val (Ast.Int 7))))));\n                            (Ast.Relational_expr\n                               (Ast.Relational_val\n                                  (Ast.Additive_val\n                                     (Ast.Multiplicative_val\n                                        (Ast.Unary_val (Ast.Int 6))))));\n                            (Ast.Relational_expr\n                               (Ast.Relational_val\n                                  (Ast.Additive_val\n                                     (Ast.Multiplicative_val\n                                        (Ast.Unary_val (Ast.Int 5))))));\n                            (Ast.Relational_expr\n                               (Ast.Relational_val\n                                  (Ast.Additive_val\n                                     (Ast.Multiplicative_val\n                                        (Ast.Unary_val (Ast.Int 4))))));\n                            (Ast.Relational_expr\n                               (Ast.Relational_val\n                                  (Ast.Additive_val\n                                     (Ast.Multiplicative_val\n                                        (Ast.Unary_val (Ast.Int 3))))));\n                            (Ast.Relational_expr\n                               (Ast.Relational_val\n                                  (Ast.Additive_val\n                                     (Ast.Multiplicative_val\n                                        (Ast.Unary_val (Ast.Int 2))))));\n                            (Ast.Relational_expr\n                               (Ast.Relational_val\n                                  (Ast.Additive_val\n                                     (Ast.Multiplicative_val\n                                        (Ast.Unary_val (Ast.Int 1))))))\n                            ])))});\n           (Ast.For_stmt\n              (Ast.For_iter\n                 { Ast.var = \"tick\";\n                   iterable =\n                   (Ast.Relational_expr\n                      (Ast.Relational_val\n                         (Ast.Additive_val\n                            (Ast.Multiplicative_val\n                               (Ast.Unary_val (Ast.Ident \"countdown\"))))));\n                   body =\n                   [(Ast.Statement\n                       (Ast.Expression_stmt\n                          (Ast.Relational_expr\n                             (Ast.Relational_val\n                                (Ast.Additive_val\n                                   (Ast.Multiplicative_val\n                                      (Ast.Unary_call\n                                         (Ast.Decl_call (\n                                            (Ast.Relational_expr\n                                               (Ast.Relational_val\n                                                  (Ast.Additive_val\n                                                     (Ast.Multiplicative_val\n                                                        (Ast.Unary_val\n                                                           (Ast.Ident\n                                                              \"printf\")))))),\n                                            [(Ast.Positional\n                                                (Ast.Relational_expr\n                                                   (Ast.Relational_val\n                                                      (Ast.Additive_val\n                                                         (Ast.Multiplicative_val\n                                                            (Ast.Unary_val\n                                                               (Ast.String\n                                                                  \"%d...\\n\")))))));\n                                              (Ast.Positional\n                                                 (Ast.Relational_expr\n                                                    (Ast.Relational_val\n                                                       (Ast.Additive_val\n                                                          (Ast.Multiplicative_val\n                                                             (Ast.Unary_val\n                                                                (Ast.Ident\n                                                                   \"tick\")))))))\n                                              ]\n                                            )))))))))\n                     ]\n                   }));\n           (Ast.Decl_stmt\n              Ast.Decl {tags = []; name = \"my_str\"; params = [];\n                explicit_ret = None;\n                body =\n                ([],\n                 (Some (Ast.Relational_expr\n                          (Ast.Relational_val\n                             (Ast.Additive_val\n                                (Ast.Multiplicative_val\n                                   (Ast.Unary_val (Ast.String \"Hello world\"))))))))});\n           (Ast.Decl_stmt\n              Ast.Decl {tags = []; name = \"idx\"; params = [];\n                explicit_ret = None;\n                body =\n                ([],\n                 (Some (Ast.Relational_expr\n                          (Ast.Relational_val\n                             (Ast.Additive_val\n                                (Ast.Multiplicative_val\n                                   (Ast.Unary_val (Ast.Int 0))))))))});\n           (Ast.For_stmt\n              (Ast.For_iter\n                 { Ast.var = \"c\";\n                   iterable =\n                   (Ast.Relational_expr\n                      (Ast.Relational_val\n                         (Ast.Additive_val\n                            (Ast.Multiplicative_val\n                               (Ast.Unary_val (Ast.Ident \"my_str\"))))));\n                   body =\n                   [(Ast.Statement\n                       (Ast.Expression_stmt\n                          (Ast.Relational_expr\n                             (Ast.Relational_val\n                                (Ast.Additive_val\n                                   (Ast.Multiplicative_val\n                                      (Ast.Unary_call\n                                         (Ast.Decl_call (\n                                            (Ast.Relational_expr\n                                               (Ast.Relational_val\n                                                  (Ast.Additive_val\n                                                     (Ast.Multiplicative_val\n                                                        (Ast.Unary_val\n                                                           (Ast.Ident\n                                                              \"printf\")))))),\n                                            [(Ast.Positional\n                                                (Ast.Relational_expr\n                                                   (Ast.Relational_val\n                                                      (Ast.Additive_val\n                                                         (Ast.Multiplicative_val\n                                                            (Ast.Unary_val\n                                                               (Ast.String\n                                                                  \"%d -> %c\\n\")))))));\n                                              (Ast.Positional\n                                                 (Ast.Relational_expr\n                                                    (Ast.Relational_val\n                                                       (Ast.Additive_val\n                                                          (Ast.Multiplicative_val\n                                                             (Ast.Unary_val\n                                                                (Ast.Ident\n                                                                   \"idx\")))))));\n                                              (Ast.Positional\n                                                 (Ast.Relational_expr\n                                                    (Ast.Relational_val\n                                                       (Ast.Additive_val\n                                                          (Ast.Multiplicative_val\n                                                             (Ast.Unary_val\n                                                                (Ast.Ident\n                                                                   \"c\")))))))\n                                              ]\n                                            )))))))));\n                     (Ast.Statement\n                        (Ast.Expression_stmt\n                           (Ast.Assignment_expr\n                              (Ast.Add_assign (\"idx\",\n                                 (Ast.Additive_val\n                                    (Ast.Multiplicative_val\n                                       (Ast.Unary_val (Ast.Int 1))))\n                                 )))))\n                     ]\n                   }))\n           ],\n         None)}))",
    "codegen": "Wrote build/emit/root.asm\n===== build/emit/root.asm (generated) =====\n\n\n  Wrote build/emit/c.asm\n===== build/emit/c.asm (generated) =====\nglobal stdio_getchar\nglobal stdio_printf\nglobal stdio_putchar\nglobal stdio_puts\nglobal stdlib_calloc\nglobal stdlib_exit\nglobal stdlib_free\nglobal stdlib_malloc\nglobal stdlib_realloc\nglobal string_memcpy\nglobal string_memset\nglobal string_strcmp\nglobal string_strcpy\nglobal string_strlen\nglobal string_strncpy\nsection .text\nstdio_printf:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_puts:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_putchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_getchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_malloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_calloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_realloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_free:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_exit:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strlen:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcmp:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strncpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memset:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/io.asm\n===== build/emit/io.asm (generated) =====\nglobal print\nglobal println\nsection .text\nprintln:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nprint:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/math.asm\n===== build/emit/math.asm (generated) =====\nglobal double\nglobal square\nsection .text\nsquare:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  imul rax, rbx\nsquare_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\ndouble:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  add rax, rbx\ndouble_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/test_for_loop.asm\n===== build/emit/test_for_loop.asm (generated) =====\nextern malloc\nextern printf\nglobal main\nsection .text\nmain:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 64\n  sub rsp, 64\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 46\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 46\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 46\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 115\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 117\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 109\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 45\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 84\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 73\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_100:\n  cmp r12, 0\n  je __list_strlen_done_101\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_100\n__list_strlen_done_101:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_102:\n  cmp r12, 0\n  je __list_strcpy_done_103\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_102\n__list_strcpy_done_103:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  xor rax, rax\n  call printf\n  mov r12, 0\n  mov rax, 1\n  mov rbx, rax\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, 2\n  mov rbx, rax\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, 3\n  mov rbx, rax\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, 4\n  mov rbx, rax\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, 5\n  mov rbx, rax\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, 6\n  mov rbx, rax\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, 7\n  mov rbx, rax\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, 8\n  mov rbx, rax\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, 9\n  mov rbx, rax\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, 10\n  mov rbx, rax\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov [rbp-8], rax\n  mov rax, [rbp-8]\n  mov [rbp - 16], rax\n__for_start_104:\n  mov r12, [rbp - 16]\n  cmp r12, 0\n  je __for_end_105\n  mov rax, [r12]\n  mov [rbp - 24], rax\n  mov r12, [r12+8]\n  mov [rbp - 16], r12\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 46\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 46\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 46\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_106:\n  cmp r12, 0\n  je __list_strlen_done_107\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_106\n__list_strlen_done_107:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_108:\n  cmp r12, 0\n  je __list_strcpy_done_109\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_108\n__list_strcpy_done_109:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, [rbp-24]\n  mov rsi, rax\n  xor rax, rax\n  call printf\n  jmp __for_start_104\n__for_end_105:\n  mov r12, 0\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 108\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 119\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 108\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 108\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 72\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov [rbp-32], rax\n  mov rax, 0\n  mov [rbp-40], rax\n  mov rax, [rbp-32]\n  mov [rbp - 48], rax\n__for_start_110:\n  mov r12, [rbp - 48]\n  cmp r12, 0\n  je __for_end_111\n  mov rax, [r12]\n  mov [rbp - 56], rax\n  mov r12, [r12+8]\n  mov [rbp - 48], r12\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 99\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 62\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 45\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_112:\n  cmp r12, 0\n  je __list_strlen_done_113\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_112\n__list_strlen_done_113:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_114:\n  cmp r12, 0\n  je __list_strcpy_done_115\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_114\n__list_strcpy_done_115:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, [rbp-40]\n  mov rsi, rax\n  mov rax, [rbp-56]\n  mov rdx, rax\n  xor rax, rax\n  call printf\n  mov rax, 1\n  mov rbx, [rbp - 40]\n  add rax, rbx\n  mov [rbp - 40], rax\n  jmp __for_start_110\n__for_end_111:\nmain_end:\n  xor rax, rax\n  mov rsp, rbp\n  pop rbp\n  ret",
    "run": "In T-minus...\n10...\n9...\n8...\n7...\n6...\n5...\n4...\n3...\n2...\n1...\n0 -> H\n1 -> e\n2 -> l\n3 -> l\n4 -> o\n5 ->  \n6 -> w\n7 -> o\n8 -> r\n9 -> l\n10 -> d"
  },
  {
    "file": "tests/test_macros.nova",
    "parse": "\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdio\";\n        exports =\n        [(Ast.Export_ident \"printf\"); (Ast.Export_ident \"puts\");\n          (Ast.Export_ident \"putchar\"); (Ast.Export_ident \"getchar\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"printf\"; calling_conf = \"c\";\n                 link_name = \"printf\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"puts\"; calling_conf = \"c\";\n                  link_name = \"puts\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"putchar\"; calling_conf = \"c\";\n                  link_name = \"putchar\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"getchar\"; calling_conf = \"c\";\n                  link_name = \"getchar\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdlib\";\n        exports =\n        [(Ast.Export_ident \"malloc\"); (Ast.Export_ident \"calloc\");\n          (Ast.Export_ident \"realloc\"); (Ast.Export_ident \"free\");\n          (Ast.Export_ident \"exit\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"malloc\"; calling_conf = \"c\";\n                 link_name = \"malloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"calloc\"; calling_conf = \"c\";\n                  link_name = \"calloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"realloc\"; calling_conf = \"c\";\n                  link_name = \"realloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"free\"; calling_conf = \"c\";\n                  link_name = \"free\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"exit\"; calling_conf = \"c\";\n                  link_name = \"exit\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"string\";\n        exports =\n        [(Ast.Export_ident \"strlen\"); (Ast.Export_ident \"strcmp\");\n          (Ast.Export_ident \"strcpy\"); (Ast.Export_ident \"strncpy\");\n          (Ast.Export_ident \"memcpy\"); (Ast.Export_ident \"memset\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"strlen\"; calling_conf = \"c\";\n                 link_name = \"strlen\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcmp\"; calling_conf = \"c\";\n                  link_name = \"strcmp\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcpy\"; calling_conf = \"c\";\n                  link_name = \"strcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strncpy\"; calling_conf = \"c\";\n                  link_name = \"strncpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memcpy\"; calling_conf = \"c\";\n                  link_name = \"memcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memset\"; calling_conf = \"c\";\n                  link_name = \"memset\"}))\n          ]}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"println\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"print\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"println\"; calling_conf = \"c\";\n        link_name = \"puts\"}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"print\"; calling_conf = \"c\";\n        link_name = \"printf\"}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"square\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"double\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"square\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Mul (\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\"))),\n                           (Ast.Unary_val (Ast.Ident \"x\")))))))))}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"double\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Add (\n                        (Ast.Additive_val\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\")))),\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_val (Ast.Ident \"x\")))\n                        ))))))}))\n(Ast.Statement\n   (Ast.Open_stmt\n      { Ast.mods = [\"std\"; \"c\"];\n        elements = [{ Ast.path = [\"stdio\"; \"printf\"]; alias = None }] }))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"const_num\"; params = [];\n        explicit_ret = None;\n        body =\n        ([],\n         (Some (Ast.Macro_expr\n                  [(Ast.Statement\n                      (Ast.Expression_stmt\n                         (Ast.Relational_expr\n                            (Ast.Relational_val\n                               (Ast.Additive_val\n                                  (Ast.Multiplicative_val\n                                     (Ast.Unary_val (Ast.Int 42))))))))\n                    ])))}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"main\"; params = []; explicit_ret = None;\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_call\n                              (Ast.Decl_call (\n                                 (Ast.Relational_expr\n                                    (Ast.Relational_val\n                                       (Ast.Additive_val\n                                          (Ast.Multiplicative_val\n                                             (Ast.Unary_call\n                                                (Ast.Decl_call (\n                                                   (Ast.Relational_expr\n                                                      (Ast.Relational_val\n                                                         (Ast.Additive_val\n                                                            (Ast.Multiplicative_val\n                                                               (Ast.Unary_val\n                                                                  (Ast.Ident\n                                                                    \"printf\")))))),\n                                                   [(Ast.Positional\n                                                       (Ast.Relational_expr\n                                                          (Ast.Relational_val\n                                                             (Ast.Additive_val\n                                                                (Ast.Multiplicative_val\n                                                                   (Ast.Unary_val\n                                                                    (Ast.String\n                                                                    \"Macro test complete\\n\")))))));\n                                                     (Ast.Positional\n                                                        (Ast.Relational_expr\n                                                           (Ast.Relational_val\n                                                              (Ast.Additive_val\n                                                                 (Ast.Multiplicative_val\n                                                                    (\n                                                                    Ast.Unary_val\n                                                                    (Ast.Int\n                                                                    0)))))))\n                                                     ]\n                                                   ))))))),\n                                 [])))))))))}))",
    "codegen": "Wrote build/emit/root.asm\n===== build/emit/root.asm (generated) =====\n\n\n  Wrote build/emit/c.asm\n===== build/emit/c.asm (generated) =====\nglobal stdio_getchar\nglobal stdio_printf\nglobal stdio_putchar\nglobal stdio_puts\nglobal stdlib_calloc\nglobal stdlib_exit\nglobal stdlib_free\nglobal stdlib_malloc\nglobal stdlib_realloc\nglobal string_memcpy\nglobal string_memset\nglobal string_strcmp\nglobal string_strcpy\nglobal string_strlen\nglobal string_strncpy\nsection .text\nstdio_printf:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_puts:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_putchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_getchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_malloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_calloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_realloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_free:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_exit:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strlen:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcmp:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strncpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memset:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/io.asm\n===== build/emit/io.asm (generated) =====\nglobal print\nglobal println\nsection .text\nprintln:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nprint:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/math.asm\n===== build/emit/math.asm (generated) =====\nglobal double\nglobal square\nsection .text\nsquare:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  imul rax, rbx\nsquare_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\ndouble:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  add rax, rbx\ndouble_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/test_macros.asm\n===== build/emit/test_macros.asm (generated) =====\nextern malloc\nextern printf\nglobal const_num\nglobal main\nsection .text\nconst_num:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 0\n  ; macro expressions are not supported yet\n  mov rax, 0\nconst_num_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\nmain:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 0\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 108\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 112\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 109\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 99\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 115\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 99\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 97\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 77\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_132:\n  cmp r12, 0\n  je __list_strlen_done_133\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_132\n__list_strlen_done_133:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_134:\n  cmp r12, 0\n  je __list_strcpy_done_135\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_134\n__list_strcpy_done_135:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, 0\n  mov rsi, rax\n  xor rax, rax\n  call printf\nmain_end:\n  xor rax, rax\n  mov rsp, rbp\n  pop rbp\n  ret",
    "run": "Macro test complete"
  },
  {
    "file": "tests/test_match.nova",
    "parse": "\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdio\";\n        exports =\n        [(Ast.Export_ident \"printf\"); (Ast.Export_ident \"puts\");\n          (Ast.Export_ident \"putchar\"); (Ast.Export_ident \"getchar\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"printf\"; calling_conf = \"c\";\n                 link_name = \"printf\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"puts\"; calling_conf = \"c\";\n                  link_name = \"puts\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"putchar\"; calling_conf = \"c\";\n                  link_name = \"putchar\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"getchar\"; calling_conf = \"c\";\n                  link_name = \"getchar\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdlib\";\n        exports =\n        [(Ast.Export_ident \"malloc\"); (Ast.Export_ident \"calloc\");\n          (Ast.Export_ident \"realloc\"); (Ast.Export_ident \"free\");\n          (Ast.Export_ident \"exit\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"malloc\"; calling_conf = \"c\";\n                 link_name = \"malloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"calloc\"; calling_conf = \"c\";\n                  link_name = \"calloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"realloc\"; calling_conf = \"c\";\n                  link_name = \"realloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"free\"; calling_conf = \"c\";\n                  link_name = \"free\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"exit\"; calling_conf = \"c\";\n                  link_name = \"exit\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"string\";\n        exports =\n        [(Ast.Export_ident \"strlen\"); (Ast.Export_ident \"strcmp\");\n          (Ast.Export_ident \"strcpy\"); (Ast.Export_ident \"strncpy\");\n          (Ast.Export_ident \"memcpy\"); (Ast.Export_ident \"memset\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"strlen\"; calling_conf = \"c\";\n                 link_name = \"strlen\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcmp\"; calling_conf = \"c\";\n                  link_name = \"strcmp\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcpy\"; calling_conf = \"c\";\n                  link_name = \"strcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strncpy\"; calling_conf = \"c\";\n                  link_name = \"strncpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memcpy\"; calling_conf = \"c\";\n                  link_name = \"memcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memset\"; calling_conf = \"c\";\n                  link_name = \"memset\"}))\n          ]}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"println\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"print\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"println\"; calling_conf = \"c\";\n        link_name = \"puts\"}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"print\"; calling_conf = \"c\";\n        link_name = \"printf\"}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"square\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"double\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"square\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Mul (\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\"))),\n                           (Ast.Unary_val (Ast.Ident \"x\")))))))))}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"double\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Add (\n                        (Ast.Additive_val\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\")))),\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_val (Ast.Ident \"x\")))\n                        ))))))}))\n(Ast.Statement\n   (Ast.Open_stmt\n      { Ast.mods = [\"std\"; \"c\"];\n        elements = [{ Ast.path = [\"stdio\"; \"printf\"]; alias = None }] }))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"main\"; params = []; explicit_ret = None;\n        body =\n        ([(Ast.Decl_stmt\n             Ast.Decl {tags = []; name = \"x\"; params = [];\n               explicit_ret = None;\n               body =\n               ([],\n                (Some (Ast.Relational_expr\n                         (Ast.Relational_val\n                            (Ast.Additive_val\n                               (Ast.Multiplicative_val\n                                  (Ast.Unary_val (Ast.Int 3))))))))});\n           (Ast.Decl_stmt\n              Ast.Decl {tags = []; name = \"result\"; params = [];\n                explicit_ret = None;\n                body =\n                ([],\n                 (Some (Ast.Match_expr\n                          ((Ast.Relational_expr\n                              (Ast.Relational_val\n                                 (Ast.Additive_val\n                                    (Ast.Multiplicative_val\n                                       (Ast.Unary_val (Ast.Ident \"x\")))))),\n                           [((Ast.Single\n                                (Ast.Relational_expr\n                                   (Ast.Relational_val\n                                      (Ast.Additive_val\n                                         (Ast.Multiplicative_val\n                                            (Ast.Unary_val (Ast.Int 1))))))),\n                             None,\n                             ([],\n                              (Some (Ast.Relational_expr\n                                       (Ast.Relational_val\n                                          (Ast.Additive_val\n                                             (Ast.Multiplicative_val\n                                                (Ast.Unary_call\n                                                   (Ast.Decl_call (\n                                                      (Ast.Relational_expr\n                                                         (Ast.Relational_val\n                                                            (Ast.Additive_val\n                                                               (Ast.Multiplicative_val\n                                                                  (Ast.Unary_val\n                                                                    (Ast.Ident\n                                                                    \"printf\")))))),\n                                                      [(Ast.Positional\n                                                          (Ast.Relational_expr\n                                                             (Ast.Relational_val\n                                                                (Ast.Additive_val\n                                                                   (Ast.Multiplicative_val\n                                                                    (Ast.Unary_val\n                                                                    (Ast.String\n                                                                    \"one\\n\")))))))\n                                                        ]\n                                                      ))))))))));\n                             ((Ast.Single\n                                 (Ast.Relational_expr\n                                    (Ast.Relational_val\n                                       (Ast.Additive_val\n                                          (Ast.Multiplicative_val\n                                             (Ast.Unary_val (Ast.Int 2))))))),\n                              None,\n                              ([],\n                               (Some (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Multiplicative_val\n                                                 (Ast.Unary_call\n                                                    (Ast.Decl_call (\n                                                       (Ast.Relational_expr\n                                                          (Ast.Relational_val\n                                                             (Ast.Additive_val\n                                                                (Ast.Multiplicative_val\n                                                                   (Ast.Unary_val\n                                                                    (Ast.Ident\n                                                                    \"printf\")))))),\n                                                       [(Ast.Positional\n                                                           (Ast.Relational_expr\n                                                              (Ast.Relational_val\n                                                                 (Ast.Additive_val\n                                                                    (\n                                                                    Ast.Multiplicative_val\n                                                                    (Ast.Unary_val\n                                                                    (Ast.String\n                                                                    \"two\\n\")))))))\n                                                         ]\n                                                       ))))))))));\n                             ((Ast.Single\n                                 (Ast.Relational_expr\n                                    (Ast.Relational_val\n                                       (Ast.Additive_val\n                                          (Ast.Multiplicative_val\n                                             (Ast.Unary_val (Ast.Ident \"_\"))))))),\n                              None,\n                              ([],\n                               (Some (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Multiplicative_val\n                                                 (Ast.Unary_call\n                                                    (Ast.Decl_call (\n                                                       (Ast.Relational_expr\n                                                          (Ast.Relational_val\n                                                             (Ast.Additive_val\n                                                                (Ast.Multiplicative_val\n                                                                   (Ast.Unary_call\n                                                                    (Ast.Decl_call (\n                                                                    (Ast.Relational_expr\n                                                                    (Ast.Relational_val\n                                                                    (Ast.Additive_val\n                                                                    (Ast.Multiplicative_val\n                                                                    (Ast.Unary_val\n                                                                    (Ast.Ident\n                                                                    \"printf\")))))),\n                                                                    [(Ast.Positional\n                                                                    (Ast.Relational_expr\n                                                                    (Ast.Relational_val\n                                                                    (Ast.Additive_val\n                                                                    (Ast.Multiplicative_val\n                                                                    (Ast.Unary_val\n                                                                    (Ast.String\n                                                                    \"other\\n\")))))))\n                                                                    ]))))))),\n                                                       []))))))))))\n                             ]))))})\n           ],\n         None)}))",
    "codegen": "Wrote build/emit/root.asm\n===== build/emit/root.asm (generated) =====\n\n\n  Wrote build/emit/c.asm\n===== build/emit/c.asm (generated) =====\nglobal stdio_getchar\nglobal stdio_printf\nglobal stdio_putchar\nglobal stdio_puts\nglobal stdlib_calloc\nglobal stdlib_exit\nglobal stdlib_free\nglobal stdlib_malloc\nglobal stdlib_realloc\nglobal string_memcpy\nglobal string_memset\nglobal string_strcmp\nglobal string_strcpy\nglobal string_strlen\nglobal string_strncpy\nsection .text\nstdio_printf:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_puts:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_putchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_getchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_malloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_calloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_realloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_free:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_exit:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strlen:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcmp:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strncpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memset:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/io.asm\n===== build/emit/io.asm (generated) =====\nglobal print\nglobal println\nsection .text\nprintln:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nprint:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/math.asm\n===== build/emit/math.asm (generated) =====\nglobal double\nglobal square\nsection .text\nsquare:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  imul rax, rbx\nsquare_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\ndouble:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  add rax, rbx\ndouble_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/test_match.asm\n===== build/emit/test_match.asm (generated) =====\nextern malloc\nextern printf\nglobal main\nsection .text\nmain:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov rax, 3\n  mov [rbp-8], rax\n  mov rax, [rbp-8]\n  mov r13, rax\n  cmp r13, 1\n  jne __match_next_141\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_142:\n  cmp r12, 0\n  je __list_strlen_done_143\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_142\n__list_strlen_done_143:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_144:\n  cmp r12, 0\n  je __list_strcpy_done_145\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_144\n__list_strcpy_done_145:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  xor rax, rax\n  call printf\n  jmp __match_end_140\n__match_next_141:\n  cmp r13, 2\n  jne __match_next_146\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 119\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_147:\n  cmp r12, 0\n  je __list_strlen_done_148\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_147\n__list_strlen_done_148:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_149:\n  cmp r12, 0\n  je __list_strcpy_done_150\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_149\n__list_strcpy_done_150:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  xor rax, rax\n  call printf\n  jmp __match_end_140\n__match_next_146:\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 104\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_152:\n  cmp r12, 0\n  je __list_strlen_done_153\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_152\n__list_strlen_done_153:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_154:\n  cmp r12, 0\n  je __list_strcpy_done_155\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_154\n__list_strcpy_done_155:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  xor rax, rax\n  call printf\n  jmp __match_end_140\n__match_next_151:\n  mov rax, 60\n  mov rdi, 1\n  syscall\n__match_end_140:\n  mov [rbp-16], rax\nmain_end:\n  xor rax, rax\n  mov rsp, rbp\n  pop rbp\n  ret",
    "run": "other"
  },
  {
    "file": "tests/test_power.nova",
    "parse": "\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdio\";\n        exports =\n        [(Ast.Export_ident \"printf\"); (Ast.Export_ident \"puts\");\n          (Ast.Export_ident \"putchar\"); (Ast.Export_ident \"getchar\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"printf\"; calling_conf = \"c\";\n                 link_name = \"printf\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"puts\"; calling_conf = \"c\";\n                  link_name = \"puts\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"putchar\"; calling_conf = \"c\";\n                  link_name = \"putchar\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"getchar\"; calling_conf = \"c\";\n                  link_name = \"getchar\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdlib\";\n        exports =\n        [(Ast.Export_ident \"malloc\"); (Ast.Export_ident \"calloc\");\n          (Ast.Export_ident \"realloc\"); (Ast.Export_ident \"free\");\n          (Ast.Export_ident \"exit\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"malloc\"; calling_conf = \"c\";\n                 link_name = \"malloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"calloc\"; calling_conf = \"c\";\n                  link_name = \"calloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"realloc\"; calling_conf = \"c\";\n                  link_name = \"realloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"free\"; calling_conf = \"c\";\n                  link_name = \"free\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"exit\"; calling_conf = \"c\";\n                  link_name = \"exit\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"string\";\n        exports =\n        [(Ast.Export_ident \"strlen\"); (Ast.Export_ident \"strcmp\");\n          (Ast.Export_ident \"strcpy\"); (Ast.Export_ident \"strncpy\");\n          (Ast.Export_ident \"memcpy\"); (Ast.Export_ident \"memset\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"strlen\"; calling_conf = \"c\";\n                 link_name = \"strlen\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcmp\"; calling_conf = \"c\";\n                  link_name = \"strcmp\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcpy\"; calling_conf = \"c\";\n                  link_name = \"strcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strncpy\"; calling_conf = \"c\";\n                  link_name = \"strncpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memcpy\"; calling_conf = \"c\";\n                  link_name = \"memcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memset\"; calling_conf = \"c\";\n                  link_name = \"memset\"}))\n          ]}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"println\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"print\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"println\"; calling_conf = \"c\";\n        link_name = \"puts\"}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"print\"; calling_conf = \"c\";\n        link_name = \"printf\"}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"square\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"double\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"square\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Mul (\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\"))),\n                           (Ast.Unary_val (Ast.Ident \"x\")))))))))}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"double\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Add (\n                        (Ast.Additive_val\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\")))),\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_val (Ast.Ident \"x\")))\n                        ))))))}))\n(Ast.Statement\n   (Ast.Open_stmt\n      { Ast.mods = [\"std\"; \"c\"];\n        elements = [{ Ast.path = [\"stdio\"; \"printf\"]; alias = None }] }))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"main\"; params = []; explicit_ret = None;\n        body =\n        ([(Ast.Decl_stmt\n             Ast.Decl {tags = []; name = \"base\"; params = [];\n               explicit_ret = None;\n               body =\n               ([],\n                (Some (Ast.Relational_expr\n                         (Ast.Relational_val\n                            (Ast.Additive_val\n                               (Ast.Multiplicative_val\n                                  (Ast.Unary_val (Ast.Int 2))))))))});\n           (Ast.Decl_stmt\n              Ast.Decl {tags = []; name = \"exp\"; params = [];\n                explicit_ret = None;\n                body =\n                ([],\n                 (Some (Ast.Relational_expr\n                          (Ast.Relational_val\n                             (Ast.Additive_val\n                                (Ast.Multiplicative_val\n                                   (Ast.Unary_val (Ast.Int 10))))))))});\n           (Ast.Decl_stmt\n              Ast.Decl {tags = []; name = \"result\"; params = [];\n                explicit_ret = None;\n                body =\n                ([],\n                 (Some (Ast.Relational_expr\n                          (Ast.Relational_val\n                             (Ast.Additive_val\n                                (Ast.Pow (\n                                   (Ast.Multiplicative_val\n                                      (Ast.Unary_val (Ast.Ident \"base\"))),\n                                   (Ast.Unary_val (Ast.Ident \"exp\")))))))))});\n           (Ast.Expression_stmt\n              (Ast.Relational_expr\n                 (Ast.Relational_val\n                    (Ast.Additive_val\n                       (Ast.Multiplicative_val\n                          (Ast.Unary_call\n                             (Ast.Decl_call (\n                                (Ast.Relational_expr\n                                   (Ast.Relational_val\n                                      (Ast.Additive_val\n                                         (Ast.Multiplicative_val\n                                            (Ast.Unary_val\n                                               (Ast.Ident \"printf\")))))),\n                                [(Ast.Positional\n                                    (Ast.Relational_expr\n                                       (Ast.Relational_val\n                                          (Ast.Additive_val\n                                             (Ast.Multiplicative_val\n                                                (Ast.Unary_val\n                                                   (Ast.String\n                                                      \"2 ^ 10 = %d\\n\")))))));\n                                  (Ast.Positional\n                                     (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Multiplicative_val\n                                                 (Ast.Unary_val\n                                                    (Ast.Ident \"result\")))))))\n                                  ]\n                                ))))))));\n           (Ast.Expression_stmt\n              (Ast.Relational_expr\n                 (Ast.Relational_val\n                    (Ast.Additive_val\n                       (Ast.Multiplicative_val\n                          (Ast.Unary_call\n                             (Ast.Decl_call (\n                                (Ast.Relational_expr\n                                   (Ast.Relational_val\n                                      (Ast.Additive_val\n                                         (Ast.Multiplicative_val\n                                            (Ast.Unary_val\n                                               (Ast.Ident \"printf\")))))),\n                                [(Ast.Positional\n                                    (Ast.Relational_expr\n                                       (Ast.Relational_val\n                                          (Ast.Additive_val\n                                             (Ast.Multiplicative_val\n                                                (Ast.Unary_val\n                                                   (Ast.String \"3 ^ 3 = %d\\n\")))))));\n                                  (Ast.Positional\n                                     (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Pow (\n                                                 (Ast.Multiplicative_val\n                                                    (Ast.Unary_val\n                                                       (Ast.Int 3))),\n                                                 (Ast.Unary_val (Ast.Int 3))\n                                                 ))))))\n                                  ]\n                                ))))))));\n           (Ast.Expression_stmt\n              (Ast.Relational_expr\n                 (Ast.Relational_val\n                    (Ast.Additive_val\n                       (Ast.Multiplicative_val\n                          (Ast.Unary_call\n                             (Ast.Decl_call (\n                                (Ast.Relational_expr\n                                   (Ast.Relational_val\n                                      (Ast.Additive_val\n                                         (Ast.Multiplicative_val\n                                            (Ast.Unary_val\n                                               (Ast.Ident \"printf\")))))),\n                                [(Ast.Positional\n                                    (Ast.Relational_expr\n                                       (Ast.Relational_val\n                                          (Ast.Additive_val\n                                             (Ast.Multiplicative_val\n                                                (Ast.Unary_val\n                                                   (Ast.String \"5 ^ 0 = %d\\n\")))))));\n                                  (Ast.Positional\n                                     (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Pow (\n                                                 (Ast.Multiplicative_val\n                                                    (Ast.Unary_val\n                                                       (Ast.Int 5))),\n                                                 (Ast.Unary_val (Ast.Int 0))\n                                                 ))))))\n                                  ]\n                                ))))))))\n           ],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_call\n                              (Ast.Decl_call (\n                                 (Ast.Relational_expr\n                                    (Ast.Relational_val\n                                       (Ast.Additive_val\n                                          (Ast.Multiplicative_val\n                                             (Ast.Unary_call\n                                                (Ast.Decl_call (\n                                                   (Ast.Relational_expr\n                                                      (Ast.Relational_val\n                                                         (Ast.Additive_val\n                                                            (Ast.Multiplicative_val\n                                                               (Ast.Unary_val\n                                                                  (Ast.Ident\n                                                                    \"printf\")))))),\n                                                   [(Ast.Positional\n                                                       (Ast.Relational_expr\n                                                          (Ast.Relational_val\n                                                             (Ast.Additive_val\n                                                                (Ast.Multiplicative_val\n                                                                   (Ast.Unary_val\n                                                                    (Ast.String\n                                                                    \"10 ^ 1 = %d\\n\")))))));\n                                                     (Ast.Positional\n                                                        (Ast.Relational_expr\n                                                           (Ast.Relational_val\n                                                              (Ast.Additive_val\n                                                                 (Ast.Pow (\n                                                                    (\n                                                                    Ast.Multiplicative_val\n                                                                    (Ast.Unary_val\n                                                                    (Ast.Int\n                                                                    10))),\n                                                                    (\n                                                                    Ast.Unary_val\n                                                                    (Ast.Int\n                                                                    1))))))))\n                                                     ]\n                                                   ))))))),\n                                 [])))))))))}))",
    "codegen": "Wrote build/emit/root.asm\n===== build/emit/root.asm (generated) =====\n\n\n  Wrote build/emit/c.asm\n===== build/emit/c.asm (generated) =====\nglobal stdio_getchar\nglobal stdio_printf\nglobal stdio_putchar\nglobal stdio_puts\nglobal stdlib_calloc\nglobal stdlib_exit\nglobal stdlib_free\nglobal stdlib_malloc\nglobal stdlib_realloc\nglobal string_memcpy\nglobal string_memset\nglobal string_strcmp\nglobal string_strcpy\nglobal string_strlen\nglobal string_strncpy\nsection .text\nstdio_printf:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_puts:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_putchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_getchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_malloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_calloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_realloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_free:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_exit:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strlen:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcmp:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strncpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memset:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/io.asm\n===== build/emit/io.asm (generated) =====\nglobal print\nglobal println\nsection .text\nprintln:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nprint:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/math.asm\n===== build/emit/math.asm (generated) =====\nglobal double\nglobal square\nsection .text\nsquare:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  imul rax, rbx\nsquare_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\ndouble:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  add rax, rbx\ndouble_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/test_power.asm\n===== build/emit/test_power.asm (generated) =====\nextern malloc\nextern printf\nglobal main\nsection .text\nmain:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 32\n  sub rsp, 32\n  mov rax, 2\n  mov [rbp-8], rax\n  mov rax, 10\n  mov [rbp-16], rax\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-16]\n  mov rcx, rax\n  pop rbx\n  mov rax, 1\n  test rcx, rcx\n  jle __pow_end_172\n__pow_loop_173:\n  imul rax, rbx\n  dec rcx\n  jnz __pow_loop_173\n__pow_end_172:\n  mov [rbp-24], rax\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 61\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 48\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 49\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 94\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 50\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_174:\n  cmp r12, 0\n  je __list_strlen_done_175\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_174\n__list_strlen_done_175:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_176:\n  cmp r12, 0\n  je __list_strcpy_done_177\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_176\n__list_strcpy_done_177:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, [rbp-24]\n  mov rsi, rax\n  xor rax, rax\n  call printf\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 61\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 51\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 94\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 51\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_178:\n  cmp r12, 0\n  je __list_strlen_done_179\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_178\n__list_strlen_done_179:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_180:\n  cmp r12, 0\n  je __list_strcpy_done_181\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_180\n__list_strcpy_done_181:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, 3\n  push rax\n  mov rax, 3\n  mov rcx, rax\n  pop rbx\n  mov rax, 1\n  test rcx, rcx\n  jle __pow_end_182\n__pow_loop_183:\n  imul rax, rbx\n  dec rcx\n  jnz __pow_loop_183\n__pow_end_182:\n  mov rsi, rax\n  xor rax, rax\n  call printf\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 61\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 48\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 94\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 53\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_184:\n  cmp r12, 0\n  je __list_strlen_done_185\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_184\n__list_strlen_done_185:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_186:\n  cmp r12, 0\n  je __list_strcpy_done_187\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_186\n__list_strcpy_done_187:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, 5\n  push rax\n  mov rax, 0\n  mov rcx, rax\n  pop rbx\n  mov rax, 1\n  test rcx, rcx\n  jle __pow_end_188\n__pow_loop_189:\n  imul rax, rbx\n  dec rcx\n  jnz __pow_loop_189\n__pow_end_188:\n  mov rsi, rax\n  xor rax, rax\n  call printf\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 61\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 49\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 94\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 48\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 49\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_190:\n  cmp r12, 0\n  je __list_strlen_done_191\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_190\n__list_strlen_done_191:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_192:\n  cmp r12, 0\n  je __list_strcpy_done_193\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_192\n__list_strcpy_done_193:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, 10\n  push rax\n  mov rax, 1\n  mov rcx, rax\n  pop rbx\n  mov rax, 1\n  test rcx, rcx\n  jle __pow_end_194\n__pow_loop_195:\n  imul rax, rbx\n  dec rcx\n  jnz __pow_loop_195\n__pow_end_194:\n  mov rsi, rax\n  xor rax, rax\n  call printf\nmain_end:\n  xor rax, rax\n  mov rsp, rbp\n  pop rbp\n  ret",
    "run": "2 ^ 10 = 1024\n3 ^ 3 = 27\n5 ^ 0 = 1\n10 ^ 1 = 10"
  },
  {
    "file": "tests/test_simple_for_loop.nova",
    "parse": "\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdio\";\n        exports =\n        [(Ast.Export_ident \"printf\"); (Ast.Export_ident \"puts\");\n          (Ast.Export_ident \"putchar\"); (Ast.Export_ident \"getchar\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"printf\"; calling_conf = \"c\";\n                 link_name = \"printf\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"puts\"; calling_conf = \"c\";\n                  link_name = \"puts\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"putchar\"; calling_conf = \"c\";\n                  link_name = \"putchar\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"getchar\"; calling_conf = \"c\";\n                  link_name = \"getchar\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdlib\";\n        exports =\n        [(Ast.Export_ident \"malloc\"); (Ast.Export_ident \"calloc\");\n          (Ast.Export_ident \"realloc\"); (Ast.Export_ident \"free\");\n          (Ast.Export_ident \"exit\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"malloc\"; calling_conf = \"c\";\n                 link_name = \"malloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"calloc\"; calling_conf = \"c\";\n                  link_name = \"calloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"realloc\"; calling_conf = \"c\";\n                  link_name = \"realloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"free\"; calling_conf = \"c\";\n                  link_name = \"free\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"exit\"; calling_conf = \"c\";\n                  link_name = \"exit\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"string\";\n        exports =\n        [(Ast.Export_ident \"strlen\"); (Ast.Export_ident \"strcmp\");\n          (Ast.Export_ident \"strcpy\"); (Ast.Export_ident \"strncpy\");\n          (Ast.Export_ident \"memcpy\"); (Ast.Export_ident \"memset\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"strlen\"; calling_conf = \"c\";\n                 link_name = \"strlen\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcmp\"; calling_conf = \"c\";\n                  link_name = \"strcmp\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcpy\"; calling_conf = \"c\";\n                  link_name = \"strcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strncpy\"; calling_conf = \"c\";\n                  link_name = \"strncpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memcpy\"; calling_conf = \"c\";\n                  link_name = \"memcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memset\"; calling_conf = \"c\";\n                  link_name = \"memset\"}))\n          ]}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"println\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"print\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"println\"; calling_conf = \"c\";\n        link_name = \"puts\"}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"print\"; calling_conf = \"c\";\n        link_name = \"printf\"}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"square\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"double\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"square\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Mul (\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\"))),\n                           (Ast.Unary_val (Ast.Ident \"x\")))))))))}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"double\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Add (\n                        (Ast.Additive_val\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\")))),\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_val (Ast.Ident \"x\")))\n                        ))))))}))\n(Ast.Statement\n   (Ast.Open_stmt\n      { Ast.mods = [\"std\"; \"c\"];\n        elements = [{ Ast.path = [\"printf\"]; alias = None }] }))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"main\"; params = []; explicit_ret = None;\n        body =\n        ([(Ast.Expression_stmt\n             (Ast.Relational_expr\n                (Ast.Relational_val\n                   (Ast.Additive_val\n                      (Ast.Multiplicative_val\n                         (Ast.Unary_call\n                            (Ast.Decl_call (\n                               (Ast.Relational_expr\n                                  (Ast.Relational_val\n                                     (Ast.Additive_val\n                                        (Ast.Multiplicative_val\n                                           (Ast.Unary_val\n                                              (Ast.Ident \"printf\")))))),\n                               [(Ast.Positional\n                                   (Ast.Relational_expr\n                                      (Ast.Relational_val\n                                         (Ast.Additive_val\n                                            (Ast.Multiplicative_val\n                                               (Ast.Unary_val\n                                                  (Ast.String\n                                                     \"Testing simple for loop\\n\")))))))\n                                 ]\n                               ))))))));\n           (Ast.For_stmt\n              (Ast.For_iter\n                 { Ast.var = \"i\";\n                   iterable =\n                   (Ast.Relational_expr\n                      (Ast.Relational_val\n                         (Ast.Additive_val\n                            (Ast.Multiplicative_val\n                               (Ast.Unary_val (Ast.Int 5))))));\n                   body =\n                   [(Ast.Statement\n                       (Ast.Expression_stmt\n                          (Ast.Relational_expr\n                             (Ast.Relational_val\n                                (Ast.Additive_val\n                                   (Ast.Multiplicative_val\n                                      (Ast.Unary_call\n                                         (Ast.Decl_call (\n                                            (Ast.Relational_expr\n                                               (Ast.Relational_val\n                                                  (Ast.Additive_val\n                                                     (Ast.Multiplicative_val\n                                                        (Ast.Unary_val\n                                                           (Ast.Ident\n                                                              \"printf\")))))),\n                                            [(Ast.Positional\n                                                (Ast.Relational_expr\n                                                   (Ast.Relational_val\n                                                      (Ast.Additive_val\n                                                         (Ast.Multiplicative_val\n                                                            (Ast.Unary_val\n                                                               (Ast.String\n                                                                  \"i = %d\\n\")))))));\n                                              (Ast.Positional\n                                                 (Ast.Relational_expr\n                                                    (Ast.Relational_val\n                                                       (Ast.Additive_val\n                                                          (Ast.Multiplicative_val\n                                                             (Ast.Unary_val\n                                                                (Ast.Ident\n                                                                   \"i\")))))))\n                                              ]\n                                            )))))))))\n                     ]\n                   }))\n           ],\n         None)}))",
    "codegen": "Wrote build/emit/root.asm\n===== build/emit/root.asm (generated) =====\n\n\n  Wrote build/emit/c.asm\n===== build/emit/c.asm (generated) =====\nglobal stdio_getchar\nglobal stdio_printf\nglobal stdio_putchar\nglobal stdio_puts\nglobal stdlib_calloc\nglobal stdlib_exit\nglobal stdlib_free\nglobal stdlib_malloc\nglobal stdlib_realloc\nglobal string_memcpy\nglobal string_memset\nglobal string_strcmp\nglobal string_strcpy\nglobal string_strlen\nglobal string_strncpy\nsection .text\nstdio_printf:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_puts:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_putchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_getchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_malloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_calloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_realloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_free:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_exit:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strlen:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcmp:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strncpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memset:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/io.asm\n===== build/emit/io.asm (generated) =====\nglobal print\nglobal println\nsection .text\nprintln:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nprint:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/math.asm\n===== build/emit/math.asm (generated) =====\nglobal double\nglobal square\nsection .text\nsquare:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  imul rax, rbx\nsquare_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\ndouble:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  add rax, rbx\ndouble_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/test_simple_for_loop.asm\n===== build/emit/test_simple_for_loop.asm (generated) =====\nextern malloc\nextern printf\nglobal main\nsection .text\nmain:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 112\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 108\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 114\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 102\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 108\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 112\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 109\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 115\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 103\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 116\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 115\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 84\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_220:\n  cmp r12, 0\n  je __list_strlen_done_221\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_220\n__list_strlen_done_221:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_222:\n  cmp r12, 0\n  je __list_strcpy_done_223\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_222\n__list_strcpy_done_223:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  xor rax, rax\n  call printf\n  mov rax, 5\n  mov [rbp - 8], rax\n  mov qword [rbp - 16], 0\n__for_start_224:\n  mov rcx, [rbp - 8]\n  cmp rcx, 0\n  jle __for_end_225\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 61\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 105\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_226:\n  cmp r12, 0\n  je __list_strlen_done_227\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_226\n__list_strlen_done_227:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_228:\n  cmp r12, 0\n  je __list_strcpy_done_229\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_228\n__list_strcpy_done_229:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, [rbp-16]\n  mov rsi, rax\n  xor rax, rax\n  call printf\n  dec qword [rbp - 8]\n  inc qword [rbp - 16]\n  jmp __for_start_224\n__for_end_225:\nmain_end:\n  xor rax, rax\n  mov rsp, rbp\n  pop rbp\n  ret",
    "run": "Testing simple for loop\ni = 0\ni = 1\ni = 2\ni = 3\ni = 4"
  },
  {
    "file": "tests/test_while.nova",
    "parse": "\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdio\";\n        exports =\n        [(Ast.Export_ident \"printf\"); (Ast.Export_ident \"puts\");\n          (Ast.Export_ident \"putchar\"); (Ast.Export_ident \"getchar\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"printf\"; calling_conf = \"c\";\n                 link_name = \"printf\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"puts\"; calling_conf = \"c\";\n                  link_name = \"puts\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"putchar\"; calling_conf = \"c\";\n                  link_name = \"putchar\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"getchar\"; calling_conf = \"c\";\n                  link_name = \"getchar\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"stdlib\";\n        exports =\n        [(Ast.Export_ident \"malloc\"); (Ast.Export_ident \"calloc\");\n          (Ast.Export_ident \"realloc\"); (Ast.Export_ident \"free\");\n          (Ast.Export_ident \"exit\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"malloc\"; calling_conf = \"c\";\n                 link_name = \"malloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"calloc\"; calling_conf = \"c\";\n                  link_name = \"calloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"realloc\"; calling_conf = \"c\";\n                  link_name = \"realloc\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"free\"; calling_conf = \"c\";\n                  link_name = \"free\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"exit\"; calling_conf = \"c\";\n                  link_name = \"exit\"}))\n          ]}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Module_decl {name = \"string\";\n        exports =\n        [(Ast.Export_ident \"strlen\"); (Ast.Export_ident \"strcmp\");\n          (Ast.Export_ident \"strcpy\"); (Ast.Export_ident \"strncpy\");\n          (Ast.Export_ident \"memcpy\"); (Ast.Export_ident \"memset\")];\n        body =\n        [(Ast.Statement\n            (Ast.Decl_stmt\n               Ast.Import_decl {name = \"strlen\"; calling_conf = \"c\";\n                 link_name = \"strlen\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcmp\"; calling_conf = \"c\";\n                  link_name = \"strcmp\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strcpy\"; calling_conf = \"c\";\n                  link_name = \"strcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"strncpy\"; calling_conf = \"c\";\n                  link_name = \"strncpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memcpy\"; calling_conf = \"c\";\n                  link_name = \"memcpy\"}));\n          (Ast.Statement\n             (Ast.Decl_stmt\n                Ast.Import_decl {name = \"memset\"; calling_conf = \"c\";\n                  link_name = \"memset\"}))\n          ]}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"println\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"print\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"println\"; calling_conf = \"c\";\n        link_name = \"puts\"}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Import_decl {name = \"print\"; calling_conf = \"c\";\n        link_name = \"printf\"}))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"square\"))))\n(Ast.Statement (Ast.Decl_stmt (Ast.Export_stmt (Ast.Export_ident \"double\"))))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"square\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Mul (\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\"))),\n                           (Ast.Unary_val (Ast.Ident \"x\")))))))))}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"double\";\n        params = [(Ast.Typed (\"x\", (Ast.User \"i32\")))];\n        explicit_ret = (Some (Ast.User \"i32\"));\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Add (\n                        (Ast.Additive_val\n                           (Ast.Multiplicative_val\n                              (Ast.Unary_val (Ast.Ident \"x\")))),\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_val (Ast.Ident \"x\")))\n                        ))))))}))\n(Ast.Statement\n   (Ast.Open_stmt\n      { Ast.mods = [\"std\"; \"c\"];\n        elements = [{ Ast.path = [\"stdio\"; \"printf\"]; alias = None }] }))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"countdown\"; params = [(Ast.Untyped \"n\")];\n        explicit_ret = None;\n        body =\n        ([(Ast.Decl_stmt\n             Ast.Decl {tags = []; name = \"m\"; params = [];\n               explicit_ret = None;\n               body =\n               ([],\n                (Some (Ast.Relational_expr\n                         (Ast.Relational_val\n                            (Ast.Additive_val\n                               (Ast.Multiplicative_val\n                                  (Ast.Unary_val (Ast.Ident \"n\"))))))))});\n           (Ast.While_stmt\n              { Ast.cond =\n                (Ast.Relational_expr\n                   (Ast.Gt (\n                      (Ast.Additive_val\n                         (Ast.Multiplicative_val\n                            (Ast.Unary_val (Ast.Ident \"m\")))),\n                      (Ast.Additive_val\n                         (Ast.Multiplicative_val (Ast.Unary_val (Ast.Int 0))))\n                      )));\n                body =\n                [(Ast.Statement\n                    (Ast.Expression_stmt\n                       (Ast.Relational_expr\n                          (Ast.Relational_val\n                             (Ast.Additive_val\n                                (Ast.Multiplicative_val\n                                   (Ast.Unary_call\n                                      (Ast.Decl_call (\n                                         (Ast.Relational_expr\n                                            (Ast.Relational_val\n                                               (Ast.Additive_val\n                                                  (Ast.Multiplicative_val\n                                                     (Ast.Unary_val\n                                                        (Ast.Ident \"printf\")))))),\n                                         [(Ast.Positional\n                                             (Ast.Relational_expr\n                                                (Ast.Relational_val\n                                                   (Ast.Additive_val\n                                                      (Ast.Multiplicative_val\n                                                         (Ast.Unary_val\n                                                            (Ast.String\n                                                               \"n = %d\\n\")))))));\n                                           (Ast.Positional\n                                              (Ast.Relational_expr\n                                                 (Ast.Relational_val\n                                                    (Ast.Additive_val\n                                                       (Ast.Multiplicative_val\n                                                          (Ast.Unary_val\n                                                             (Ast.Ident \"m\")))))))\n                                           ]\n                                         )))))))));\n                  (Ast.Statement\n                     (Ast.Expression_stmt\n                        (Ast.Assignment_expr\n                           (Ast.Sub_assign (\"m\",\n                              (Ast.Additive_val\n                                 (Ast.Multiplicative_val\n                                    (Ast.Unary_val (Ast.Int 1))))\n                              )))))\n                  ]\n                })\n           ],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_call\n                              (Ast.Decl_call (\n                                 (Ast.Relational_expr\n                                    (Ast.Relational_val\n                                       (Ast.Additive_val\n                                          (Ast.Multiplicative_val\n                                             (Ast.Unary_val\n                                                (Ast.Ident \"printf\")))))),\n                                 [(Ast.Positional\n                                     (Ast.Relational_expr\n                                        (Ast.Relational_val\n                                           (Ast.Additive_val\n                                              (Ast.Multiplicative_val\n                                                 (Ast.Unary_val\n                                                    (Ast.String \"done!\\n\")))))))\n                                   ]\n                                 )))))))))}))\n(Ast.Statement\n   (Ast.Decl_stmt\n      Ast.Decl {tags = []; name = \"main\"; params = []; explicit_ret = None;\n        body =\n        ([],\n         (Some (Ast.Relational_expr\n                  (Ast.Relational_val\n                     (Ast.Additive_val\n                        (Ast.Multiplicative_val\n                           (Ast.Unary_call\n                              (Ast.Decl_call (\n                                 (Ast.Relational_expr\n                                    (Ast.Relational_val\n                                       (Ast.Additive_val\n                                          (Ast.Multiplicative_val\n                                             (Ast.Unary_call\n                                                (Ast.Decl_call (\n                                                   (Ast.Relational_expr\n                                                      (Ast.Relational_val\n                                                         (Ast.Additive_val\n                                                            (Ast.Multiplicative_val\n                                                               (Ast.Unary_val\n                                                                  (Ast.Ident\n                                                                    \"countdown\")))))),\n                                                   [(Ast.Positional\n                                                       (Ast.Relational_expr\n                                                          (Ast.Relational_val\n                                                             (Ast.Additive_val\n                                                                (Ast.Multiplicative_val\n                                                                   (Ast.Unary_val\n                                                                    (Ast.Int\n                                                                    3)))))))\n                                                     ]\n                                                   ))))))),\n                                 [])))))))))}))",
    "codegen": "Wrote build/emit/root.asm\n===== build/emit/root.asm (generated) =====\n\n\n  Wrote build/emit/c.asm\n===== build/emit/c.asm (generated) =====\nglobal stdio_getchar\nglobal stdio_printf\nglobal stdio_putchar\nglobal stdio_puts\nglobal stdlib_calloc\nglobal stdlib_exit\nglobal stdlib_free\nglobal stdlib_malloc\nglobal stdlib_realloc\nglobal string_memcpy\nglobal string_memset\nglobal string_strcmp\nglobal string_strcpy\nglobal string_strlen\nglobal string_strncpy\nsection .text\nstdio_printf:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_puts:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_putchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdio_getchar:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_malloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_calloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_realloc:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_free:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstdlib_exit:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strlen:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcmp:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_strncpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memcpy:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nstring_memset:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/io.asm\n===== build/emit/io.asm (generated) =====\nglobal print\nglobal println\nsection .text\nprintln:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\nprint:\n  push rbp\n  mov rbp, rsp\n  ; stub: abort (unimplemented)\n  mov rax, 60\n  mov rdi, 1\n  syscall\n  ud2\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/math.asm\n===== build/emit/math.asm (generated) =====\nglobal double\nglobal square\nsection .text\nsquare:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  imul rax, rbx\nsquare_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\ndouble:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  push rax\n  mov rax, [rbp-8]\n  pop rbx\n  add rax, rbx\ndouble_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\n\n\n  Wrote build/emit/test_while.asm\n===== build/emit/test_while.asm (generated) =====\nextern malloc\nextern printf\nglobal countdown\nglobal main\nsection .text\ncountdown:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 16\n  sub rsp, 16\n  mov [rbp-8], rdi\n  mov rax, [rbp-8]\n  mov [rbp-8], rax\n__while_start_240:\n  mov rax, [rbp-8]\n  push rax\n  mov rax, 0\n  pop rbx\n  cmp rbx, rax\n  setg al\n  movzx rax, al\n  cmp rax, 0\n  je __while_end_241\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 37\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 61\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 32\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_242:\n  cmp r12, 0\n  je __list_strlen_done_243\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_242\n__list_strlen_done_243:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_244:\n  cmp r12, 0\n  je __list_strcpy_done_245\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_244\n__list_strcpy_done_245:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  mov rax, [rbp-8]\n  mov rsi, rax\n  xor rax, rax\n  call printf\n  mov rax, 1\n  mov rbx, [rbp - 8]\n  sub rbx, rax\n  mov [rbp - 8], rbx\n  mov rax, rbx\n  jmp __while_start_240\n__while_end_241:\n  mov r12, 0\n  mov rbx, 10\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 33\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 101\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 110\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 111\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rbx, 100\n  mov rdi, 16\n  call malloc\n  mov [rax], rbx\n  mov [rax+8], r12\n  mov r12, rax\n  mov rax, r12\n  mov rbx, rax\n  mov r12, rax\n  xor rcx, rcx\n__list_strlen_246:\n  cmp r12, 0\n  je __list_strlen_done_247\n  inc rcx\n  mov r12, [r12+8]\n  jmp __list_strlen_246\n__list_strlen_done_247:\n  mov rdi, rcx\n  inc rdi\n  call malloc\n  mov r13, rax\n  mov r12, rbx\n  xor rdx, rdx\n__list_strcpy_248:\n  cmp r12, 0\n  je __list_strcpy_done_249\n  mov r14, [r12]\n  mov byte [r13+rdx], r14b\n  mov r12, [r12+8]\n  inc rdx\n  jmp __list_strcpy_248\n__list_strcpy_done_249:\n  mov byte [r13+rdx], 0\n  mov rax, r13\n  mov rdi, rax\n  xor rax, rax\n  call printf\ncountdown_end:\n  mov rsp, rbp\n  pop rbp\n  ret\n\nmain:\n  push rbp\n  mov rbp, rsp\n  ; stack alloc 0\n  mov rax, 3\n  mov rdi, rax\n  xor rax, rax\n  call countdown\nmain_end:\n  xor rax, rax\n  mov rsp, rbp\n  pop rbp\n  ret",
    "run": "n = 3\nn = 2\nn = 1\ndone!"
  }
]